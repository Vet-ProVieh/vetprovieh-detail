{"version":3,"file":"vetprovieh-detail.js","sources":["../../vetprovieh-shared/dist/vetprovieh-shared.js","../../formt-validation/dist/formt-validation.js","../lib/loaded-event.ts","../lib/vetprovieh-detail.ts","../lib/vetprovieh-notification.ts"],"sourcesContent":["/**\n * Helper to get and set Attributes on Objects\n */\nclass ObjectHelper {\n    /**\n     * Checking if the Element is an Object\n     * @param obj\n     */\n    static isObject(obj) {\n        return obj != null && typeof (obj) === 'object';\n    }\n    /**\n       * Getting Value from JSON-Object\n       * @param {Indexable} object\n       * @param {string} key\n       * @return {any}\n       */\n    static get(object, key) {\n        try {\n            const attributes = key.split('.');\n            return this._iterateThrough(object, attributes);\n        }\n        catch (ex) {\n            return undefined;\n        }\n    }\n    /**\n       * Iterating Through Object\n       * @param {Indexable} obj\n       * @param {string[]} attributes\n       * @param {number} depth\n       * @return {any}\n       * @private\n       */\n    static _iterateThrough(obj, attributes, depth = 0) {\n        if (depth < 0)\n            return undefined;\n        while (attributes.length > depth) {\n            const attribute = attributes.shift();\n            if (!obj)\n                throw new Error('Unknown Key');\n            obj = obj[attribute];\n        }\n        return obj;\n    }\n    /**\n       * Setting value for Object\n       * @param {Indexable} object\n       * @param {string} key\n       * @param {any} value\n       */\n    static set(object, key, value) {\n        const attributes = key.split('.');\n        object = this._iterateThrough(object, attributes, 1);\n        const property = attributes[0];\n        object[property] = value;\n    }\n    /**\n       * Object to String\n       * @param {Object} obj\n       * @return {string}\n       */\n    static objectToStringDeep(obj) {\n        if (!obj)\n            return '';\n        return Object.keys(obj).map((k) => {\n            const value = obj[k];\n            if (typeof (value) == 'object') {\n                return ObjectHelper.objectToStringDeep(value);\n            }\n            else {\n                return value;\n            }\n        }).toString();\n    }\n}\n\n/**\n * Helpers for View\n */\nclass ViewHelper {\n    /**\n       * Mark text yellow inside an element.\n       * @param {Node} element\n       * @param {string} input\n       */\n    static markElement(element, input) {\n        if (input != '') {\n            element.childNodes.forEach((n) => {\n                const value = n.nodeValue || '';\n                if (n.nodeName === '#text' && value.indexOf(input) >= 0) {\n                    element.innerHTML = n['data']\n                        .split(input)\n                        .join('<mark>' + input + '</mark>');\n                }\n                else {\n                    ViewHelper.markElement(n, input);\n                }\n            });\n        }\n    }\n    /**\n     * Getting URL-Parameter from address\n     * @param {string} key\n     * @return {string}\n     */\n    static getParameter(key) {\n        const urlString = window.location.href;\n        const url = new URL(urlString);\n        const value = url.searchParams.get(key);\n        return value;\n    }\n    /**\n       * Regex to fill keys in template\n       * @return {RegExp}\n       */\n    static get regexTemplate() {\n        return /{{([a-zA-Z0-9\\.]+)}}/;\n    }\n    /**\n       * Replacing Placeholders in template from the loaded element\n       * @param {HTMLElement} template\n       * @param {Indexable} e\n       */\n    static replacePlaceholders(template, e) {\n        let match = null;\n        while (match = template.innerHTML.match(ViewHelper.regexTemplate)) {\n            let value = ObjectHelper.get(e, match[1]);\n            value = value || '';\n            template.innerHTML = template.innerHTML.replace(match[0], value);\n        }\n    }\n}\n\n/**\n * Binding for Form Fields\n */\nclass VetproviehBinding {\n    /**\n     * Default Constructor needs object and a property to bind\n     * @param {any} target\n     * @param {target} property\n     */\n    constructor(target, property) {\n        this._targetObject = target;\n        this._targetProperty = property;\n        this._bindings = [];\n    }\n    /**\n     * Gets current property value\n     * @return {any}\n     */\n    get value() {\n        return ObjectHelper.get(this._targetObject, this._targetProperty);\n    }\n    /**\n     * Sets current property value\n     * @param {any} val\n     */\n    set value(val) {\n        if (val !== this.value) {\n            ObjectHelper.set(this._targetObject, this._targetProperty, val);\n            this._updateBindings(val);\n        }\n    }\n    /**\n     * Add Binding to HTML-Field\n     * @param {HTMLElement} element\n     * @param {string} attribute\n     * @param {string} event\n     * @return {VetproviehBinding}\n     */\n    addBinding(element, attribute, event) {\n        this._attachListenerToEvent(element, event, attribute);\n        this._addToBindings(element, attribute);\n        element[attribute] = this.value;\n        return this;\n    }\n    /**\n     * Insert into internal datastructure\n     * @param {HTMLElement} element\n     * @param {string} attribute\n     * @private\n     */\n    _addToBindings(element, attribute) {\n        this._bindings.push({\n            element: element,\n            attribute: attribute,\n        });\n    }\n    /**\n     * Attach EventListener\n     * @param {HTMLElement} element\n     * @param {string} event\n     * @param {string} attribute\n     * @private\n     */\n    _attachListenerToEvent(element, event, attribute) {\n        element.addEventListener(event, () => {\n            this.value = element[attribute];\n        });\n    }\n    /**\n     * Update all set Bindings\n     * @param {any} val\n     * @private\n     */\n    _updateBindings(val) {\n        this._bindings.forEach((binding) => {\n            binding.element[binding.attribute] = val;\n        });\n    }\n    /**\n   * Binding Form Elements\n   * @param {HTMLElement} target (Target - HTMLElement)\n   * @param {any} data (DataObject)\n   * @param {string} prefix\n   */\n    static bindFormElements(target, data, prefix = '') {\n        Object.keys(data).forEach((key) => {\n            if (ObjectHelper.isObject(data[key])) {\n                this.bindFormElements(target, data[key], key + '.');\n            }\n            else {\n                const binding = new VetproviehBinding(data, key);\n                const element = target\n                    .querySelector('[property=\"' + prefix + key + '\"]');\n                if (element) {\n                    this._attachEventListener(element);\n                    binding.addBinding(element, 'value', 'change');\n                }\n            }\n        });\n    }\n    /**\n     * Attaching EventListener\n     * @param {HTMLElement | null} element\n     * @param {VetproviehBinding} binding\n     */\n    static _attachEventListener(element) {\n        element.addEventListener('blur', (event) => {\n            //const validator = new FormtValidation();\n            //validator.validateElement(event.target as HTMLInputElement);\n        });\n    }\n}\n\n/**\n * BaseClass for view Elements\n */\nclass VetproviehElement extends HTMLElement {\n    /**\n       * Callback Implementation\n       * @param {string} name\n       * @param {any} old\n       * @param {any} value\n       */\n    attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n            this[name] = value;\n        }\n    }\n    /**\n     * Loading HTML-Element From ShadowRoot\n     * @param {string} id\n     * @return {HTMLElement | undefined}\n     */\n    getByIdFromShadowRoot(id) {\n        if (this.shadowRoot) {\n            return this.shadowRoot.getElementById(id);\n        }\n    }\n    /**\n       * Hide Or Show Element\n       * @param {string} id\n       * @param {boolean} show\n       */\n    updateVisibility(id, show) {\n        const search = this.getByIdFromShadowRoot(id);\n        if (search) {\n            if (!show) {\n                search.classList.add('is-hidden');\n            }\n            else {\n                search.classList.remove('is-hidden');\n            }\n        }\n    }\n    // -----------------\n    // CLASS METHODS\n    // -----------------\n    /**\n       * Getting Template\n       * @return {string}\n       */\n    static get template() {\n        return `<link href=\"/node_modules/bulma/css/bulma.min.css\" \n                  rel=\"stylesheet\" type=\"text/css\">`;\n    }\n}\n\n/**\n * NavParams for a MPA-Application\n */\nclass VetproviehNavParams {\n    /**\n       * Returning Something out of the Storage\n       * @param {string} key\n       * @return {any}\n       */\n    static get(key) {\n        const loadedObject = localStorage.getItem(key);\n        if (loadedObject) {\n            return JSON.parse(loadedObject);\n        }\n        return {};\n    }\n    /**\n       * Delete a local Storage Item\n       * @param {string} key\n       */\n    static delete(key) {\n        localStorage.removeItem(key);\n    }\n    /**\n       * Setting Storage\n       * @param {string} key\n       * @param {any} value\n       */\n    static set(key, value) {\n        localStorage.setItem(key, JSON.stringify(value));\n    }\n}\n\n/**\n * Repeats Template Element. Amount is set by the amount of objects\n * inside\n */\nclass VetproviehRepeat extends VetproviehElement {\n    /**\n     * Default-Contructor\n     * @param {HTMLTemplateElement} pListTemplate\n     */\n    constructor(pListTemplate = undefined) {\n        super();\n        this._objects = [];\n        this._orderBy = \"+position\";\n        const listTemplate = pListTemplate || this.querySelector('template');\n        if (listTemplate) {\n            this._listTemplate = listTemplate.content;\n        }\n        else {\n            this._listTemplate = new DocumentFragment();\n        }\n    }\n    /**\n      * Getting View Template\n      * @return {string}\n      */\n    static get template() {\n        return VetproviehElement.template + `<div id=\"listElements\"></div>`;\n    }\n    /**\n       * Getting observed Attributes\n       * @return {string[]}\n       */\n    static get observedAttributes() {\n        return ['objects', 'orderBy'];\n    }\n    /**\n     * Get objects\n     * @return {Array<any>}\n     */\n    get objects() {\n        return this._objects;\n    }\n    /**\n     * Set objects\n     * @param {Array<any>} v\n     */\n    set objects(v) {\n        if (this._objects != v) {\n            this._objects = v;\n            this.clearAndRender();\n        }\n    }\n    /**\n    * Get OrderBy\n    * Expect \"+position\" for asceding positon\n    * Expect \"-position\" for descending position\n    * @return {string}\n    */\n    get orderBy() {\n        return this._orderBy;\n    }\n    /**\n     * Set OrderBy\n     * @param {string} v\n     */\n    set orderBy(v) {\n        if (this._orderBy != v) {\n            this._orderBy = v;\n            this.clearAndRender();\n        }\n    }\n    /**\n    * Connected Callback\n    */\n    connectedCallback() {\n        this._initalizeShadowRoot(VetproviehRepeat.template);\n        this.renderList();\n    }\n    /**\n     * Clear and Render\n     */\n    clearAndRender() {\n        this.clear();\n        this._sortObjects();\n        this.renderList();\n    }\n    /**\n     * Sorting Objects\n     */\n    _sortObjects() {\n        try {\n            let asc = this.orderBy.substring(0, 1) == \"+\" ? 1 : -1;\n            let argument = this.orderBy.substring(1);\n            this.objects = this.objects\n                .sort((a, b) => {\n                let aValue = a[argument];\n                let bValue = b[argument];\n                return (aValue - bValue) * asc;\n            });\n        }\n        catch (e) {\n        }\n    }\n    /**\n     * List will be cleared\n     */\n    clear() {\n        const list = this.list;\n        if (list)\n            list.innerHTML = '';\n    }\n    /**\n     * Rendering List-Content\n     */\n    renderList() {\n        this.objects\n            .forEach((obj, index) => {\n            this._attachToList(obj, index);\n        });\n    }\n    /**\n     * Inserts Element to List\n     * @param {any} dataItem\n     * @param {index} number\n     * @private\n     */\n    _attachToList(dataItem, index = 0) {\n        if (this.shadowRoot) {\n            const newListItem = this._generateListItem(dataItem);\n            dataItem[\"index\"] = index;\n            ViewHelper.replacePlaceholders(newListItem, dataItem);\n            const list = this.list;\n            if (list) {\n                list.appendChild(newListItem.children[0]);\n            }\n        }\n    }\n    /**\n     * Getting List Element\n     * @return {HTMLElement | undefined}\n     */\n    get list() {\n        if (this.shadowRoot) {\n            return this.shadowRoot.getElementById('listElements');\n        }\n        else {\n            return undefined;\n        }\n    }\n    /**\n    * Generate new Item for List which is based on the template\n    * @param {any} dataItem\n    * @param {boolean} activatedEventListener\n    * @return {HTMLDivElement}\n    * @private\n    */\n    _generateListItem(dataItem, activatedEventListener = false) {\n        const newNode = document.importNode(this._listTemplate, true);\n        const div = document.createElement('div');\n        if (activatedEventListener) {\n            div.addEventListener('click', () => {\n                const selectedEvent = new Event('selected');\n                selectedEvent['data'] = dataItem;\n                this.dispatchEvent(selectedEvent);\n            });\n        }\n        div.appendChild(newNode);\n        return div;\n    }\n    /**\n     * Intializing Shadow-Root\n     * @param {string} template\n     * @protected\n     */\n    _initalizeShadowRoot(template) {\n        // Lazy creation of shadowRoot.\n        if (!this.shadowRoot) {\n            super.attachShadow({\n                mode: 'open',\n            }).innerHTML = template;\n        }\n    }\n}\nif (!customElements.get('vp-repeat')) {\n    customElements.define('vp-repeat', VetproviehRepeat);\n}\n\n/**\n * HTML-Element with inner Databinding\n */\nclass ElementBinding extends VetproviehElement {\n    constructor() {\n        super();\n    }\n    /**\n    * Getter group\n    * @property\n    * @return {any}\n    */\n    get object() {\n        return this._object;\n    }\n    /**\n     * Setter group\n     * @param {any} value\n     */\n    set object(value) {\n        if (this._object != value) {\n            this._object = value;\n        }\n    }\n    /**\n     * Connected Callback\n     */\n    connectedCallback() {\n        this._beforeRender();\n        this._renderTemplate();\n        this._afterRender();\n    }\n    /**\n     * Callback to Overwrite\n     * @protected\n     */\n    _beforeRender() {\n    }\n    /**\n     * Callback to Overwrite\n     * @protected\n     */\n    _afterRender() {\n    }\n    /**\n     * Resetting innerHTML to a blank string\n     */\n    resetInnerHtml() {\n        this.innerHTML = '';\n    }\n    /**\n     * Building Template to Show\n     * @return {HTMLElement}\n     */\n    _buildTemplate() {\n        let div = document.createElement(\"div\");\n        div.innerHTML = this.template;\n        ViewHelper.replacePlaceholders(div, this.object);\n        return div;\n    }\n    /**\n     * Render Template\n     * @private\n     */\n    _renderTemplate() {\n        this.resetInnerHtml();\n        this.append(this._buildTemplate());\n        VetproviehBinding.bindFormElements(this, this.object);\n    }\n    /**\n    * Returning template\n    * @return {string}\n    */\n    get template() {\n        return '';\n    }\n    /**\n      * Observed attributes\n      * @return {Array<string>}\n      */\n    static get observedAttributes() {\n        return ['object'];\n    }\n}\n\n/**\n * HTML-Element with inner Databinding\n */\nclass ElementGroupBinding extends ElementBinding {\n    constructor() {\n        super(...arguments);\n        // Id of the element to attach subelements\n        this._fieldId = \"fields\";\n    }\n    /**\n     * Returns the subFields of the object\n     * must be overwritten in the children\n     * @protected\n     */\n    subFields() {\n        throw new Error(\"Not Implemented\");\n    }\n    /**\n     * Generating new SubElement\n     * @param type\n     */\n    newElement() {\n        throw new Error(\"Not Implemented\");\n    }\n    /**\n     * Callback after Render\n     * Attach Fields to\n     */\n    _afterRender() {\n        let fieldElement = this.querySelector(\"#\" + this._fieldId);\n        if (fieldElement) {\n            this.subFields().forEach((field) => {\n                let newField = this.newElement();\n                newField.object = field;\n                fieldElement.appendChild(newField);\n            });\n        }\n    }\n}\n\nexport { ElementBinding, ElementGroupBinding, ObjectHelper, VetproviehBinding, VetproviehElement, VetproviehNavParams, VetproviehRepeat, ViewHelper };\n//# sourceMappingURL=vetprovieh-shared.js.map\n","/**\n * Decorator for CSS-Framework bulma.io\n */\nclass BulmaDecorator {\n    /**\n       * CSS-ErrorClass\n       * @return {string}\n       * @constructor\n       */\n    static get ErrorClass() {\n        return 'is-danger';\n    }\n    /**\n       * CSS-SuccessClass\n       * @return {string}\n       * @constructor\n       */\n    static get SuccessClass() {\n        return 'is-success';\n    }\n    /**\n       * Formatting Success Element\n       * @param {HTMLInputElement} element\n       */\n    success(element) {\n        this._removeErrorIfNecessary(element);\n        if (!element.classList.contains(BulmaDecorator.SuccessClass)) {\n            element.classList.add(BulmaDecorator.SuccessClass);\n        }\n    }\n    /**\n       * Formatting Error Element\n       * @param {HTMLInputElement} element\n       */\n    error(element) {\n        this._removeSuccessIfNecessary(element);\n        if (!element.classList.contains(BulmaDecorator.ErrorClass)) {\n            element.classList.add(BulmaDecorator.ErrorClass);\n            this._attachIcon(element);\n        }\n        this._removeHelpText(element);\n        this._attachErrorMessage(element);\n    }\n    /**\n       *\n       * @param {HTMLInputElement} element\n       */\n    _attachErrorMessage(element) {\n        const paragraph = element.ownerDocument.createElement('p');\n        paragraph.classList.add('help', BulmaDecorator.ErrorClass);\n        paragraph.innerHTML = element.validationMessage;\n        if (element.parentElement) {\n            if (element.parentElement.parentElement) {\n                element.parentElement.parentElement.appendChild(paragraph);\n            }\n        }\n    }\n    /**\n       *\n       * @param {HTMLInputElement} element\n       */\n    _attachIcon(element) {\n        const document = element.ownerDocument;\n        const span = document.createElement('span');\n        span.classList.add('icon', 'is-small', 'is-right');\n        const i = document.createElement('i');\n        i.classList.add('fas', 'fa-exclamation-triangle');\n        span.appendChild(i);\n        if (element.parentElement) {\n            element.parentElement.classList.add('has-icons-right');\n            element.parentElement.appendChild(span);\n        }\n    }\n    /**\n       * Removing Error\n       * @param {HTMLInputElement} element\n       */\n    _removeErrorIfNecessary(element) {\n        if (element.classList.contains(BulmaDecorator.ErrorClass)) {\n            element.classList.remove(BulmaDecorator.ErrorClass);\n            this._removeErrorIcon(element);\n            this._removeHelpText(element);\n        }\n    }\n    /**\n     * Removing Success Class\n     * @param {HTMLInputElement} element\n     */\n    _removeSuccessIfNecessary(element) {\n        if (element.classList.contains(BulmaDecorator.SuccessClass)) {\n            element.classList.remove(BulmaDecorator.SuccessClass);\n        }\n    }\n    /**\n       * Removing Icon\n       * @param {HTMLInputElement} element\n       */\n    _removeErrorIcon(element) {\n        const parent = element.parentElement;\n        parent.classList.remove('has-icons-right');\n        const span = parent.lastChild;\n        if (span.tagName == 'SPAN') {\n            parent.removeChild(span);\n        }\n    }\n    /**\n       * Removing Helptext\n       * @param {HTMLInputElement} element\n       */\n    _removeHelpText(element) {\n        if (element.parentElement && element.parentElement.parentElement) {\n            const parentParent = element.parentElement.parentElement;\n            const paragraph = parentParent.lastChild;\n            if (paragraph.tagName == 'P') {\n                parentParent.removeChild(paragraph);\n            }\n        }\n    }\n}\n\nconst notAcceptedInputTypes = ['reset', 'button', 'submit'];\n/**\n * Facade for Form-Validation.\n */\nclass FormtValidation {\n    /**\n       * Is a Input Element accepted?\n       * @param {HTMLInputElement} element\n       * @return {boolean}\n       */\n    static isAcceptedInputType(element) {\n        return element.tagName == 'TEXTAREA' || element.tagName == 'INPUT' &&\n            notAcceptedInputTypes.findIndex((t) => t === element.type) == -1;\n    }\n    /**\n       * Validation of Form\n       * @param {HTMLFormElement} form\n       * @return {boolean}\n       */\n    validateForm(form) {\n        const formValid = form.checkValidity();\n        if (!formValid) {\n            for (const element of form.elements) {\n                this.validateElement(element);\n            }\n        }\n        return formValid;\n    }\n    /**\n       * Validation of an InputElement\n       * @param {HTMLInputElement} element\n       * @return {boolean}\n       */\n    validateElement(element) {\n        if (FormtValidation.isAcceptedInputType(element)) {\n            this._styleElement(element);\n            return element.reportValidity();\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n       * Style a InputElement\n       * @param {HTMLInputElement} element\n       * @private\n       */\n    _styleElement(element) {\n        const decorator = new BulmaDecorator();\n        if (element.reportValidity()) {\n            decorator.success(element);\n        }\n        else {\n            decorator.error(element);\n        }\n    }\n}\n\nexport { FormtValidation };\n//# sourceMappingURL=formt-validation.js.map\n","\n\nexport class LoadedEvent extends Event {\n\n    private _data: any;\n\n    constructor(data: any) {\n        super(\"loadeddata\");\n        this.data = data;\n    }\n\n    public get data(): any {\n        return this._data;\n    }\n    public set data(v: any) {\n        if (this._data != v) {\n            this._data = v;\n        }\n    }\n}","import {\n  VetproviehBinding,\n  VetproviehElement,\n  VetproviehNavParams,\n  ViewHelper,\n} from '@tomuench/vetprovieh-shared';\nimport { FormtValidation } from '@tomuench/formt-validation';\nimport { VetproviehNotification } from './vetprovieh-notification';\nimport { LoadedEvent } from './loaded-event';\n/**\n * `vetprovieh-detail`\n * Detail-Frame for Read, Create and Update Entities. Used in Vet:Provieh.\n *\n * @customElement\n */\nexport class VetproviehDetail extends VetproviehElement {\n  /**\n       * Getting Template\n       */\n  static get template() {\n    return super.template + ` \n        <form id=\"form\">\n            <vetprovieh-notification id=\"notification\">\n            </vetprovieh-notification>\n            <div id=\"detail\" class=\"container\">\n            \n            </div>\n            <hr/>\n            <div class=\"container\">\n            <div class=\"columns\">\n                <div class=\"column\">\n                    <input id=\"abortButton\" \n                            class=\"button is-danger is-fullwidth\" \n                            type=\"reset\" value=\"Abbrechen\">                   \n                </div>\n                <div class=\"column\">\n                    <input id=\"saveButton\" \n                            class=\"button is-success is-fullwidth\" \n                            type=\"button\" value=\"Speichern\">\n                </div>\n            </div>\n            </div>\n        </form>\n        `;\n  }\n\n  /**\n       * Observed attributes\n       * @return {Array<string>}\n       */\n  static get observedAttributes() {\n    return ['src', 'id'];\n  }\n\n  private _src: string | null = null;\n  private _id: string | null = null;\n  private _currentObject: any = {};\n  private _detailTemplate: DocumentFragment | undefined;\n\n  private _storeElement: boolean = false;\n\n  /**\n   * Default-Constructor\n   * @param {HTMLTemplateElement | undefined} pListTemplate\n   */\n  constructor(pListTemplate: HTMLTemplateElement | undefined = undefined) {\n    super();\n\n    const template = pListTemplate || this.querySelector('template');\n    if (template) {\n      this._detailTemplate = template.content;\n    }\n  }\n\n  /**\n     * @property {boolean} storeElement\n     */\n  get storeElement() {\n    return this._storeElement;\n  }\n\n  /**\n   * Setting Src\n   * @param {boolean} val\n   */\n  set storeElement(val) {\n    if (val !== this.storeElement) {\n      this._storeElement = val;\n    }\n  }\n\n  /**\n     * @property {string|null} src\n     */\n  get src() {\n    return this._src;\n  }\n\n  /**\n   * Setting Src\n   * @param {string} val\n   */\n  set src(val) {\n    if (val !== this.src) {\n      this._src = val;\n      this._fetchDataFromServer();\n    }\n  }\n\n  /**\n   * Get Current Object\n   * @return {any}\n   */\n  get currentObject(): any {\n    return this._currentObject;\n  }\n\n  /**\n   * ID of the currentObject\n     * @property {string|undefined} id\n     */\n  get objId() {\n    return this._id;\n  }\n\n  /**\n   * Set Id of currentObject\n   * @param {string} val\n   */\n  set objId(val) {\n    if (val !== this.objId) {\n      this._id = val;\n      this._fetchDataFromServer();\n    }\n  }\n\n  /**\n   * Run Callback\n   */\n  connectedCallback() {\n    // Lazy creation of shadowRoot.\n    if (!this.shadowRoot) {\n      this.attachShadow({\n        mode: 'open',\n      }).innerHTML = VetproviehDetail.template;\n    }\n    this._attachListenerToButtons();\n    this._loadHtmlId();\n\n    window.onunload = () => this._storeCurrentObject();\n  }\n\n  /**\n     * Attaching Listener to Save and Abort Button\n     * @private\n     */\n  _attachListenerToButtons() {\n    const save = this.getByIdFromShadowRoot('saveButton') as HTMLElement;\n    const abort = this.getByIdFromShadowRoot('abortButton') as HTMLElement;\n    save.addEventListener('click', () => this.save());\n    abort.addEventListener('click', () => {\n\n      // Destroy Cached local Data\n      VetproviehNavParams.delete(window.location.href);\n      window.history.back()\n    });\n  }\n\n  /**\n   * Show Notification\n   * @param {string} text\n   * @param {string} type\n   */\n  _showNotification(text: string, type = 'is-success') {\n    const notification =\n      this.getByIdFromShadowRoot('notification') as VetproviehNotification;\n    notification.text = text;\n    notification.type = type;\n    notification.display();\n  }\n\n  /**\n     * Save-Process\n     */\n  save() {\n    if (this._validateForm()) {\n      const xhr = this._buildSaveRequest();\n      const _this = this;\n      xhr.onload = function () {\n        // Process our return data\n        if (xhr.status >= 200 && xhr.status < 300) {\n          // What do when the request is successful\n          console.log('success!', xhr);\n          _this._showNotification('Daten erfolgreich gespeichert');\n\n          // Destroy Cached local Data\n          VetproviehNavParams.delete(window.location.href);\n        } else {\n          // What do when the request fails\n          console.log('The request failed!');\n          _this._showNotification('Daten konnten nicht gespeichert werden.',\n            'is-danger');\n        }\n      }.bind(this as VetproviehDetail);\n      xhr.send(JSON.stringify(this._currentObject));\n    }\n  }\n\n  /**\n     * Build-Save Request for Backend\n     * @return {XMLHttpRequest}\n     * @private\n     */\n  _buildSaveRequest() {\n    const xhr = new XMLHttpRequest();\n\n    if (this.objId != 'new') {\n      xhr.open('PUT', this.src + '/' + this.objId);\n    } else {\n      xhr.open('POST', this.src as string);\n    }\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    return xhr;\n  }\n\n  /**\n     * Validate the Form\n     * @return {boolean}\n     * @private\n     */\n  _validateForm() {\n    const form = this.getByIdFromShadowRoot('form') as HTMLFormElement;\n    const validator = new FormtValidation();\n    return validator.validateForm(form);\n  }\n\n  /**\n     * Attach Data to List\n     * @param {any} data\n     * @param {string} searchValue\n     */\n  attachData(data: any) {\n    const detail = this.getByIdFromShadowRoot('detail') as HTMLElement;\n    detail.innerHTML = '';\n    detail.appendChild(this._generateDetail());\n    if (data) {\n      this._bindFormElements(data);\n      this._emitLoaded(data);\n    }\n  }\n\n  /**\n   * Emitting loaded Event\n   * @param {any} data \n   */\n  _emitLoaded(data: any) {\n    var event = new LoadedEvent(data);\n    this.dispatchEvent(event);\n  }\n\n  /**\n     * Load ID from Parameters\n     * @private\n     */\n  _loadHtmlId() {\n    this.objId = ViewHelper.getParameter(\"id\");\n\n    if (!this.objId) {\n      this.objId = 'new';\n    }\n  }\n\n  /**\n   * Binding Form Elements\n   * @param {any} data\n   * @param {string} prefix\n   */\n  _bindFormElements(data: any, prefix = '') {\n    if (prefix == '') {\n      this._currentObject = data;\n    }\n\n    Object.keys(data).forEach((key) => {\n      if (data[key] != null && typeof (data[key]) === 'object') {\n        this._bindFormElements(data[key], key + '.');\n      } else {\n        const binding = new VetproviehBinding(data, key);\n        const element = (this.shadowRoot as ShadowRoot)\n          .querySelector('[property=\"' + prefix + key + '\"]');\n\n        if (element) {\n          element.addEventListener('blur', (event) => {\n            const validator = new FormtValidation();\n            validator.validateElement(event.target as HTMLInputElement);\n          });\n          binding.addBinding(element as HTMLElement, 'value', 'change');\n        }\n      }\n    });\n  }\n\n  /**\n     * Generate new Item for List which is based on the template\n     * @return {HTMLDivElement}\n     * @private\n     */\n  _generateDetail() {\n    const div = document.createElement('div');\n    let newNode: any = document.createElement('p');\n    newNode.innerHTML = 'Not definied';\n    if (this._detailTemplate) {\n      newNode = document.importNode(this._detailTemplate, true);\n    }\n    div.appendChild(newNode);\n    return div;\n  }\n\n  // -----------------\n  // PRIVATE METHODS\n  // -----------------\n\n  /**\n   * Overwriteable Callback\n   * @param {any} data\n   * @protected\n   */\n  _afterFetch(data: any) {\n\n  }\n\n  /**\n   * Storing current Object into LocalStorage\n   */\n  _storeCurrentObject() {\n    if (this.storeElement) {\n      VetproviehNavParams.set(this._storeKey, this.currentObject);\n    }\n  }\n\n\n  /**\n   * Getting StoreKey\n   * @return {string}\n   */\n  private get _storeKey(): string {\n    let url = window.location.origin + window.location.pathname;\n    if (this.objId != 'new') {\n      url += \"?id=\" + this.objId;\n    }\n    return url;\n  }\n\n  /**\n   * Loading Data from Remote-Server\n   * @private\n   */\n  _fetchDataFromServer() {\n    if (this.objId && this.src) {\n      const self = this;\n      let endpoint = 'new.json';\n      let localObject = null;\n\n      if (this.objId != 'new') {\n        endpoint = this.src + '/' + this.objId;\n        localObject = VetproviehNavParams.get(this._storeKey);\n      } else if (this.storeElement) {\n        localObject = VetproviehNavParams.get(this._storeKey);\n      }\n\n      if (localObject && Object.keys(localObject).length > 0) {\n        self.attachData(localObject);\n        self._afterFetch(localObject);\n      } else {\n        fetch(endpoint)\n          .then((response) => response.json())\n          .then((data) => self.attachData(data))\n          .then((data) => self._afterFetch(data))\n          .catch((error) => console.log(error));\n      }\n    }\n  }\n\n  // -----------------\n  // CLASS METHODS\n  // -----------------\n}\n\ncustomElements.define('vetprovieh-detail', VetproviehDetail);\n","import {VetproviehElement} from '@tomuench/vetprovieh-shared';\n\n/**\n * Notification\n */\nexport class VetproviehNotification extends VetproviehElement {\n  /**\n     * Getting Template\n     * @return {string}\n     */\n  static get template() {\n    return super.template + `\n              <style>\n                  #notification {\n                      transition: all 1s linear;\n                  }\n                  .hidden{\n                      opacity: 0;\n                  }\n              </style>\n              <div class=\"is-hidden\">\n                  <div id=\"notification\" class=\"notification hidden\">\n                    <div id=\"text\"></div>\n                  </div>\n              </div>\n          `;\n  }\n\n    private _text:string;\n    private _type = 'is-primary';\n\n    /**\n     * Default-Constructor\n     */\n    constructor() {\n      super();\n\n      this._text = this.innerHTML;\n    }\n\n    /**\n       * @property {string|null} type\n       */\n    get type() {\n      return this._type;\n    }\n\n    /**\n     * Setting type\n     * @param {string|null} val\n     */\n    set type(val) {\n      if (val !== this.type) {\n        this._type = val;\n        this._updateRendering();\n      }\n    }\n\n    /**\n       * @property {string|null} text\n       */\n    get text() {\n      return this._text;\n    }\n\n    /**\n     * Setting Text\n     * @param {string| null} val\n     */\n    set text(val) {\n      if (val !== this.text) {\n        this._text = val;\n        this._updateRendering();\n      }\n    }\n\n    /**\n       * Show Notification for 3 seconds.\n       */\n    display() {\n      const notificationBox: HTMLElement = this._notificationBox;\n      const parent: HTMLElement = notificationBox.parentElement as HTMLElement;\n      notificationBox.classList.remove('hidden');\n\n      setTimeout(() => {\n        parent.classList.remove('is-hidden');\n      }, 1000);\n      setTimeout(() => {\n        notificationBox.classList.add('hidden');\n      }, 3000);\n      setTimeout(() => {\n        parent.classList.add('is-hidden');\n      }, 4000);\n    }\n\n    /**\n     * Load NotificationBox from Content\n     * @return {HTMLElement}\n     */\n    private get _notificationBox(): HTMLElement {\n      return this.getByIdFromShadowRoot('notification') as HTMLElement;\n    }\n\n    /**\n     * UI-Callback\n     */\n    connectedCallback() {\n      // Lazy creation of shadowRoot.\n      if (!this.shadowRoot) {\n        this.attachShadow({\n          mode: 'open',\n        }).innerHTML = VetproviehNotification.template;\n      }\n\n      this._updateRendering();\n    }\n\n\n    /**\n     * Rendering update\n     */\n    _updateRendering() {\n      const notificationBox = this._notificationBox;\n      const textBox = this.getByIdFromShadowRoot('text') as HTMLElement;\n\n      notificationBox.classList.add(this.type);\n      textBox.innerHTML = this._text;\n    }\n}\n\ncustomElements.define('vetprovieh-notification', VetproviehNotification);\n"],"names":[],"mappings":"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"}